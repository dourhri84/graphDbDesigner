// ===============================
//  Ecommerce UML → AdjustedCDLang
// ===============================

acd ecommerce {

  // -------- Classes --------

  class Client  {
    string login unique;
    string password;
    int phone;
    datetime creationDate;
    string firstName;
    string lastName;
    string name;
    int gov_id;
    string type;
  }

  class Address {
    string addr_id unique;
    string road;
    string district;
    string town;
    int zipcode;
  }

  class Order   {
    int oid unique;
    datetime odatetime;
    float shippingFee;
    float total;
    int sequenceNumber;
  }

  class Payment {
    int pm_number unique;
    datetime pm_datetime;
  }

  class RemoteAccess {
    int idAccess unique;
    datetime timeAccess;
    string ip;
    string webBrowser;
    string OSNameVersion;
  }

  class CreditCard {
    int card_number unique;
    date expireDate;
    int cvc;
    boolean status;
    string bank;
    float interestRate;
    float limit;
  }

  class DebitCard {
    int card_number unique;
    date expireDate;
    int cvc;
    boolean status;
    string bank;
    float balance;
    string label;
  }

  class Product {
    string reference unique;
    string designation;
    string description;
  }

  class Category {
    string code unique;
    string cname;
    float vatRate;
  }

  class Seller {
    int seller_gov_id unique;
    string company_name;
  }

  // -------- Associations --------

  // Client pays Orders (Client [0..1] - Order [0..*])
  association PAYS binary {
    Client [0..1],
    Order [0..*]
  }

  // Client makes Orders: Client [1] - Order [0..*]
  association MAKES binary {
    Client [1],
    Order [0..*]
  }

  // RemoteAccess uses Payment: RemoteAccess [1] - Payment [0..1]
  association USES binary {
    RemoteAccess [1],
    Payment [0..1]
  }

  // Payment concerns1 DebitCard
  association CONCERNS1 binary {
    Payment [0..*],
    DebitCard [0..1]
  }

  // Payment CONCERNS2 CreditCard
  association CONCERNS binary {
    Payment [0..*],
    CreditCard [0..1]
  }


  // Adjusting of the ternary association "Contains": Order × Product × Seller
  class CONTAINS {
    int orderedQty;
    float unitPrice;
    float discountRate;
  }

  association CONTAINS_Order binary {
    Order [0..*],
    Contains [-1..-1],
  } 

  association CONTAINS_Product binary {
    Product [1..*],
    Contains [-1..-1],
  }

  association CONTAINS_Seller binary {
    Seller [1..*],
    Contains [-1..-1],
  }

  // Seller provides Product with stock/warranty attributes
  association PROVIDES binary {
    Seller [1..*],
    Product [1..*]
  } {
    int inStockQty;
    int warranty;
  }

  // Reflexive association on Client (referral)
  association REFERRAL reflexive on Client {
    roles (referrer, referred)
    m1 [0..*]   // referrer multiplicity
    m2 [0..1]   // referred multiplicity
  }

  association has binary {
    Client [0..*],
    Address [1]
  } 

  association is_composed_of binary {
    Category [1],
    Product [1..*]
  } 

association is_composed_of2 binary {
    Order [1],
    Payment [0..1]
  } 

}
